(this.webpackJsonptemplate_react=this.webpackJsonptemplate_react||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),s=n.n(c),o=(n(37),n(31)),i=n(6),u=n(2),l=n.n(u),p=n(3),d=n(4),f=n(5),h=n(9),v=n(8),j=n(14),b=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"get",value:function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=localStorage.getItem(t))){e.next=3;break}return e.abrupt("return",JSON.parse(r));case 3:return e.next=5,n();case 5:a=e.sent;try{localStorage.setItem(t,JSON.stringify(a))}catch(c){localStorage.clear()}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),O={headers:{Accept:"application/json"}},g={headers:{Accept:"text/csv"}};function y(e){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,O);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m,k,w=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"pathJoin",value:function(e){return e.join("/")}},{key:"json",value:function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.get("WWW.json.".concat("v20210823",".").concat(t),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(t));case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"tsv",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,g);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=r.split("\n"),c=a[0].split("\t").map((function(e){return e.replace("\r","")})),s=a.slice(1,-1).map((function(e){var t=e.split("\t");return c.reduce((function(e,n,r){return e[n]=t[r].replace("\r",""),e}),{})})),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=n(15),L={COUNTRY:"country",PROVINCE:"province",DISTRICT:"district",DSD:"dsd",GND:"gnd"},D=Object.values(L),I=(m={},Object(C.a)(m,L.PROVINCE,"Province"),Object(C.a)(m,L.DISTRICT,"District"),Object(C.a)(m,L.DSD,"Divisional Secretariat Division"),Object(C.a)(m,L.GND,"Grama Niladhari Division"),m),S=(k={},Object(C.a)(k,L.COUNTRY,L.PROVINCE),Object(C.a)(k,L.PROVINCE,L.DISTRICT),Object(C.a)(k,L.DISTRICT,L.DSD),Object(C.a)(k,L.DSD,L.GND),Object(C.a)(k,L.GND,void 0),k),T=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"getEntsByType",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data/ents/".concat(t,".tsv"),e.next=3,w.tsv(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntIndexByType",value:function(){var t=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntsByType(n);case 2:return r=t.sent,t.abrupt("return",r.reduce((function(e,t){return e[t.id]=t,e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllEntIndex",value:function(){var t=Object(p.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=D,t.next=3,Promise.all(n.map(function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntIndexByType(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return r=t.sent,t.abrupt("return",n.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getEnt",value:function(){var t=Object(p.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntIndexByType(n);case 2:return a=t.sent,(c=a[r]).centroid&&(c.centroid=JSON.parse(c.centroid)),t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getParentToChildMap",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"data/ents/parent_to_child_map.json",e.next=3,w.json("data/ents/parent_to_child_map.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getChildIDs",value:function(){var t=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getParentToChildMap();case 2:if(!(r=t.sent)[n]){t.next=5;break}return t.abrupt("return",r[n]);case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),N=[6.9157,79.8636];function E(e,t){var n=Object(j.a)(e,2),r=n[0],a=n[1],c=0;for(var s in t){var o=(s-1+t.length)%t.length,i=Object(j.a)(t[s],2),u=i[0],l=i[1],p=Object(j.a)(t[o],2),d=p[0],f=p[1];l>r!==f>r&&a<(d-u)*(r-l)/(f-l)+u&&(c+=1)}return c%2===1}function R(e,t){for(var n in t){var r=t[n];for(var a in r){if(E(e,r[a]))return!0}}return!1}var M=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"getGeoForRegion",value:function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="data/geo/".concat(t,"/").concat(n,".json"),e.next=3,w.json(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRegionTree",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"data/geo/region_tree.json",e.next=3,w.json("data/geo/region_tree.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isPointInRegion",value:function(){var t=Object(p.a)(l.a.mark((function t(n,r,a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGeoForRegion(r,a);case 2:return c=t.sent,t.abrupt("return",R(n,c));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getRegionsForPoint",value:function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a,c,s,o,i,u,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRegionTree();case 2:r=t.sent,a={},t.t0=l.a.keys(D);case 5:if((t.t1=t.t0()).done){t.next=24;break}c=t.t1.value,s=D[c],o=Object.keys(r),i=!1,t.t2=l.a.keys(o);case 11:if((t.t3=t.t2()).done){t.next=20;break}return u=t.t3.value,p=o[u],t.next=16,e.isPointInRegion(n,s,p);case 16:t.sent&&(a[s]=p,r=r[p],i=!0),t.next=11;break;case 20:if(i){t.next=22;break}return t.abrupt("break",24);case 22:t.next=5;break;case 24:return t.abrupt("return",a);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();function z(e){var t=1e6;return e.map((function(e){return Math.round(parseFloat(e)*t)/t}))}var P=n(60),F=n(55),_=(n(39),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={dataList:void 0},r}return Object(f.a)(n,[{key:"getDataList",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isComponentMounted=!0,e.next=3,this.getDataListAndUpdateState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDataListAndUpdateState",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDataList();case 2:t=e.sent,this.isComponentMounted&&this.setState({dataList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.isComponentMounted=!1}},{key:"renderDataList",value:function(){return null}},{key:"render",value:function(){return this.state.dataList?this.renderDataList():null}}],[{key:"getLabel",value:function(){return"AbstractLayer"}},{key:"isMatch",value:function(e){return!1}}]),n}(r.Component)),A=n(1),G=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getDataList",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.pathJoin(["https://raw.githubusercontent.com","nuuuwan/covid19/data","covid19.lk_vax_centers.latest.tsv"]),e.next=3,w.tsv(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderDataList",value:function(){return this.state.dataList.map((function(e,t){if(!e.lat)return null;var n=[parseFloat(e.lat),parseFloat(e.lng)],r="green";e.tags&&(r="red");var a=[];e.dose1&&a.push("\ud83d\udc89 1st Dose"),e.dose2&&a.push("\ud83d\udc89 2nd Dose");return Object(A.jsx)(P.a,{center:n,radius:1e3,pathOptions:{color:r},eventHandlers:{mouseover:function(e){e.target.openPopup()}},children:Object(A.jsxs)(F.a,{children:[Object(A.jsx)("h3",{children:e.center}),Object(A.jsx)("address",{children:e.formatted_address}),a,Object(A.jsx)("hr",{}),Object(A.jsxs)("div",{children:[Object(A.jsx)("strong",{children:e.police})," ","Police Area, "," ",Object(A.jsx)("strong",{children:e.district})," District"]}),Object(A.jsx)("div",{children:e.tags}),Object(A.jsx)("div",{style:{fontSize:"70%"},children:e.fuzzy_key})]})},"layer-data-".concat(t))}))}}],[{key:"getLabel",value:function(){return"COVID19 \ud83e\udda0 Vaccination Centers"}},{key:"isMatch",value:function(e){return n.getLabel().toLowerCase().includes(e.toLowerCase())}}]),n}(_),U=n(56),B=(n(41),{color:"white",fillColor:"red",fillOpacity:.2,weight:2}),J=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={geoData:void 0,ent:void 0},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isComponentMounted=!0,t=this.props,n=t.regionType,r=t.regionID,e.next=4,M.getGeoForRegion(n,r);case 4:return a=e.sent,e.next=7,T.getEnt(n,r);case 7:c=e.sent,this.isComponentMounted&&this.setState({geoData:a,ent:c});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.isComponentMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.geoData,n=e.ent;if(!t)return"...";var r=this.props,a=r.regionType,c=r.regionID,s=r.onClick,o={type:"MultiPolygon",coordinates:t},i=null,u=S[a];if(u){var l=I[u];i=Object(A.jsxs)("div",{className:"div-show",onClick:function(){s(a,c)},children:["Show",Object(A.jsx)("strong",{children:" ".concat(l,"s")})]})}return Object(A.jsx)(U.a,{className:"geojson",data:o,style:B,children:Object(A.jsxs)(F.a,{children:[Object(A.jsx)("h2",{children:Object(A.jsx)("span",{className:"div-region-name-geojson",children:n.name})}),Object(A.jsx)("h2",{children:Object(A.jsx)("span",{className:"div-region-type-geojson",children:I[a]})}),i,Object(A.jsx)("hr",{}),Object(A.jsx)("table",{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Population"}),Object(A.jsx)("td",{className:"td-value",children:parseInt(n.population).toLocaleString()})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Area"}),Object(A.jsxs)("td",{className:"td-value",children:[parseFloat(n.area).toLocaleString()," km\xb2"]})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Altitude (Centroid)"}),Object(A.jsxs)("td",{className:"td-value",children:[parseFloat(n.centroid_altitude).toLocaleString()," m"]})]})]})})]})},"geojson-".concat(c))}}]),n}(r.Component),V=[G,function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={rootRegionID:"LK",rootRegionType:L.COUNTRY},r}return Object(f.a)(n,[{key:"getDataList",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.rootRegionID,r=t.rootRegionType,a=S[r],e.next=4,T.getChildIDs(n);case 4:return c=e.sent,s=c.map((function(e){return{regionType:a,regionID:e}})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClick",value:function(e,t){this.setState({rootRegionID:t,rootRegionType:e},Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDataList();case 2:t=e.sent,this.setState({dataList:t});case 4:case"end":return e.stop()}}),e,this)}))).bind(this))}},{key:"renderDataList",value:function(){return this.state.dataList.map(function(e){var t=e.regionType,n=e.regionID;return Object(A.jsx)(J,{regionType:t,regionID:n,onClick:this.onClick.bind(this)},"region-geo-".concat(n))}.bind(this))}}],[{key:"getLabel",value:function(){return"Administrative Regions"}},{key:"isMatch",value:function(e){return n.getLabel().toLowerCase().includes(e.toLowerCase())}}]),n}(_)],W=V,Y=(n(42),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={matchingLayerClasses:[]},r}return Object(f.a)(n,[{key:"onInputTextLayersChange",value:function(e){var t=e.target.value.toLowerCase();if(t.length>5){var n=V.filter((function(e){return e.isMatch(t)}));this.setState({matchingLayerClasses:n})}}},{key:"render",value:function(){var e=this.state.matchingLayerClasses,t=this.props,n=t.onSelectLayer,r=t.selectedLayerClasses,a=function(e){var t=e.getLabel(),a="div-layer";return r.includes(e)&&(a+=" div-layer-selected"),Object(A.jsx)("div",{className:a,onClick:function(t){n(e)},children:t},"li-".concat(t))},c=r.map((function(e){return e.getLabel()}));return Object(A.jsxs)("div",{className:"div-layer-view",children:[Object(A.jsx)("h1",{children:c}),Object(A.jsx)("input",{className:"input-text-layers",type:"text",placeholder:"Search Layers",onChange:this.onInputTextLayersChange.bind(this)}),e.map(a),Object(A.jsx)("div",{className:"div-common-layer-header",children:"Commonly Used Layers"}),W.map(a)]})}}]),n}(r.Component)),H=n(57),K=n(58),Z=n(61),q=n(59);n(43);function Q(e){return Object(H.a)({moveend:function(t){e.onMoveEnd(t)}}),null}var X=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(K.a,{center:this.props.center,zoom:this.props.zoom,zoomControl:!1,children:[Object(A.jsx)(Z.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(A.jsx)(Q,{onMoveEnd:this.props.onMoveEnd}),Object(A.jsx)(q.a,{zoom:this.props.zoom,position:"bottomright"}),this.props.children]})}}]),n}(r.Component),$=n.p+"static/media/geolocate.f5052489.png";n(44);var ee=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;Object(d.a)(this,n);var a=function(e){var t=e.split(","),n=Object(j.a)(t,3),r=n[0],a=n[1],c=n[2];return{lat:parseFloat(r.replace("N","")),lng:parseFloat(a.replace("E","")),zoom:parseInt(c.replace("z",""))}}((r=t.call(this,e)).props.match.params.locationStr),c=a.lat,s=a.lng,o=a.zoom;return r.state={selectedLayerClasses:[],center:[c,s],selectedCenter:[c,s],zoom:o,entIndex:{},allEntIndex:void 0},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAllEntIndex();case 2:t=e.sent,this.setState({allEntIndex:t,selectedLayerClasses:[V[0]]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMoveEnd",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.getCenter(),console.debug("onMoveEnd",n),r=t.target.getZoom(),a=z([n.lat,n.lng]),c=Object(j.a)(a,2),s=c[0],o=c[1],i="/metaverse/".concat(s,"N,").concat(o,"E,").concat(r,"z"),window.history.pushState({},null,i),this.setState({zoom:r,center:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickGeoLocate",value:function(e){var t;t=function(e){this.setState({center:e,selectedCenter:e,zoom:15})}.bind(this),navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t([e.coords.latitude,e.coords.longitude])})):t(N)}},{key:"onSelectLayer",value:function(e){this.setState({selectedLayerClasses:[e]})}},{key:"render",value:function(){var e=this.state,t=e.selectedLayerClasses,n=e.center,r=e.selectedCenter,a=e.zoom;return e.allEntIndex?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"div-title",children:Object(A.jsx)("img",{className:"img-geolocate",src:$,alt:"geolocate",onClick:this.onClickGeoLocate.bind(this)})}),Object(A.jsx)(Y,{onSelectLayer:this.onSelectLayer.bind(this),selectedLayerClasses:t}),Object(A.jsx)(X,{center:n,zoom:a,onMoveEnd:this.onMoveEnd.bind(this),children:t.map((function(e,t){return Object(A.jsx)(e,{center:n},"custom-layer-class-".concat(t))}))},"geomap-".concat(r))]}):"..."}}]),n}(r.Component);n(45);var te=function(){return Object(A.jsx)(o.a,{basename:"/metaverse",children:Object(A.jsxs)(i.d,{children:[Object(A.jsx)(i.b,{path:"/:locationStr",component:ee}),Object(A.jsx)(i.b,{children:Object(A.jsx)(i.a,{to:"/6.9157N,79.8636E,15z"})})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(te,{})}),document.getElementById("root")),ne()}},[[54,1,2]]]);
//# sourceMappingURL=main.5881b270.chunk.js.map